@using Syncfusion.JavaScript
@using Syncfusion.MVC.EJ
@using Syncfusion.JavaScript.DataVisualization
@using Syncfusion.JavaScript.DataVisualization.Models

@section SampleHeading{
	<span class="sampleName">Map / Selection</span>
	}
@section MetaTags{
    <meta name="description" content="This sample depicts the results of United States presidential election, 2012 using selection and highlight feature in the Syncfusion ASP.NET Web Forms Maps control.">
}    
@section ControlsSection{
    <div class="Common">
	<div class="tablediv" style = "font-size: 17px;font-weight: 400;">
		This sample depicts the results of United States presidential election, 2012 using selection and highlight feature in the Syncfusion ASP.NET Web Forms Maps control
    </div>
    <br/>
   <div style="background-color: #FAFAF9;border-color: lightgray;border-width: 2px;opacity: 0.7;;height: 60px;width:240px" >
		<span style="color:Black;font-size:22px;margin:15px;margin-top:13px;margin-left:20px;margin-right:20px;height:25px;font-weight:Normal;">USA Election 2012</span>   
   </div>
   <div style="min-height:435px;">
       <ej-map id="maps" shape-selected="onSelect" enable-animation="true">
           <e-layers>
               <e-layer layer-type="@LayerType.Geometry" enable-mouse-hover="true" enable-selection="true" show-tooltip="true" tooltip-template="template"
                        shape-data-path="State" shape-property-path="name" show-map-items="false" datasource="ViewBag.datasource">
                   <e-shape-settings stroke-thickness="0.5" highlight-border-width="1" auto-fill="false" stroke="white" highlight-stroke="white"
                                     value-path="Electors" color-value-path="Candidate" selection-color="#EFB856"
                                     selection-stroke-width="2.5">                      
                   </e-shape-settings>

               </e-layer>
           </e-layers>
       </ej-map>

                    </div>

            <div class="popup" id="closepopup" style="margin-top:-150px;margin-left:75%;"> 
				     <table style="margin-top:-10px;width:auto">
                        <tr>
                            <td align="left" style="padding:0.3px">
                                <span id="winner" style="color:green;font-size:18px;font-weight:bold;"></span>
                            </td>
                        </tr>
                        <tr>
                            <td align="left" style="padding:0.3px">
                                <span style="color:Black;font-size:12px;font-weight:normal;">State</span>
                            </td>
                            <td align="left" style="padding:0.3px">
                                <span style="color:Black;font-size:12px;font-weight:normal;margin-left:8px">:</span>
                            </td>
                            <td align="left" style="padding:0.3px">
                                <span id="state" style="color:Black;font-size:12px;font-weight:normal;margin-left:8px"></span>
                            </td>
                        </tr>
                        <tr>
                            <td align="left" style="padding:0.3px">
                                <span style="color:Black;font-size:12px;font-weight:normal;">Electoral Votes </span>           
                            </td>
                            <td align="left" style="padding:0.3px">
                                <span style="color:Black;font-size:12px;font-weight:normal;margin-left:8px">:</span>
                            </td>
                            <td align="left" style="padding:0.3px">
                                <span id="votes" style="color:Black;font-size:12px;font-weight:normal;margin-left:8px"></span>
                            </td>
                        </tr>
                    </table>
				<div class="close-btn" id="closebutton"  style="margin-left:191px;margin-top:-96px"><a href="#">X</a></div>
            </div>
            </div>

  <script  id="template" type="application/jsrender">
	<div class="tip">				
		<p class="small" style="margin-top:8px">
            <span style="color:white;font-size:12px;font-weight:normal;">State : {{:State}}</span>
        </p>
        <p class="big">
			<span style="color:white;font-size:12px;font-weight:normal;">Winner : {{:Candidate}}</span>
        </p>
	</div>          
    </script>   
}
@section ScriptSection{
<script src="@Url.Content("~/scripts/MapsData/USA.js")"></script>
 <script>
     $("document").ready(function () {
         var mapObj = $("#maps").data("ejMap");
         mapObj.model.layers[0].shapeData = usMap;
         mapObj.model.layers[0].shapeSettings.colorMappings =
             {equalColorMapping:
                     [{ value: "Romney", color: "#D84444" },
                         { value: "Obama", color: "#316DB5" }]
             };
         $("#maps").css("height", "470px");
         $("#maps").ejMap("refresh");

     });
    
     function onSelect(event) {
	 if (event.originalEvent.length>0) {
         var matched = jQuery.uaMatch(navigator.userAgent);
         var browser = matched.browser.toLowerCase();
		 var isIE11 = !!navigator.userAgent.match(/Trident\/7\./);
         if (isIE11)
			browser = "msie";
         var object = event.originalEvent[0].data;
         var popup = document.getElementById("closepopup");
         var closebutton = document.getElementById("closebutton");
         var winner = document.getElementById("winner");
         var state = document.getElementById("state");
         var vote = document.getElementById("votes");
         $(popup).css("display", "block");
		 $(closebutton).css({"display":"block"});								
         $(closebutton).click(function () {
			var popup = document.getElementById("closepopup");
            var closebutton = document.getElementById("closebutton");
            $(popup).css("display", "none");
            $(closebutton).css("display", "none");
         });		          
         if (browser != "mozilla") {
             state.innerText = object.State;
             vote.innerText = object.Electors;
             winner.innerText = object.Candidate;
         }
         else {
             state.textContent = object.State;
             vote.textContent = object.Electors;
             winner.textContent = object.Candidate;
         }
		 }
     }

    
    
</script>
    }
@section StyleSection
{
     <style type="text/css">	 
            p.small {line-height:50%;}
            p.big {line-height:110%;}

            .tip {
                    border: 1px solid #4D4D4D;
                    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
                    border-radius: 7px;
                    margin-right: 25px;
                    min-width: 110px;
                    padding-top: 9px;
                    padding-right: 10px;
                    padding-left: 10px;
                    width: auto;
                    height: auto;
                    background: #4D4D4D;
                }

            .popup {
                    border: 1px solid #5B5B5B;
                    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
                    left:768px;
                    top:362px;                    
                    margin-bottom: 2em;
                    border-radius: 7px;
                    opacity:0.8;
                    display:none;
                    margin-right: 25px;
                    width: 190px;
                    padding: 1em;
                    height: 70px;
                    background: white;
                }

            .close-btn {
                border: 2px solid #5B5B5B;                
                padding: 1px 4px;
                top: 351px;
                opacity:0.8;
                background-color: #605F61;
                left: 975px;
                border-radius: 50%/50%; 
                width: 12px;
                height: 19px;
                display:none;
                z-index:1000;
            }

            .close-btn a {
                font-size: 12px;
                margin-left:2px;
                font-weight: bold;
                color: white;
                text-decoration: none;                
            }
        

	</style>
}